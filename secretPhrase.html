<!doctype html>
<html lang="it">

<head>
  <meta charset="utf-8">
  <title>WYBMB</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
  <script src="app.js" defer></script>
</head>

<body>
  <!-- Cornice -->
  <div class="frame" aria-hidden="false" aria-label="Cornice animata">
    <!-- Top -->
    <div class="edge edge-top">
      <div class="track">
        <span class="band" data-phrase="01010101010 • 111010010100 • 0101000010101 • 101010101010 • "></span>
        <span class="band" data-phrase="01010101010 • 111010010100 • 0101000010101 • 101010101010 • "></span>
      </div>
    </div>
    <!-- Bottom -->
    <div class="edge edge-bottom">
      <div class="track">
        <span class="band" data-phrase="01010101010 • 111010010100 • 0101000010101 • 101010101010 • "></span>
        <span class="band" data-phrase="01010101010 • 111010010100 • 0101000010101 • 101010101010 • "></span>
      </div>
    </div>
  </div>

  <!-- Contenuto pagina -->
  <main class="content">
    <h1 class="title">WYBMB</h1>

    <button id="backButton" onclick="back()">&lt;-</button>

    <div class="translateMore">
      <h1 id="1">****</h1>
      <h1 id="4">******</h1>
      <h1 id="2">** ***</h1>
      <h1 id="5">*********?</h1>
      <h1 id="3">(** *****)</h1>
      
    </div>

    
  </main>

  <script>
    const data = {
      '1': "VUOI",
      '2': "IL MIO",
      '3': "(DI NUOVO)",
      '4': "ESSERE",
      '5': "FIDANZATO?"
    };

    function getKeyFromHash() {
      // location.hash: es. "#key=3" => rimuovi "#", poi parsifica come query string
      const params = new URLSearchParams(location.hash.slice(1));
      return params.get('key');
    }

    function renderByKey(key) {

      const phrases = [document.getElementById("1"), document.getElementById("2"), 
        document.getElementById("3"), document.getElementById("4"), document.getElementById("5")]

      const number = Number(key);

      for(i=0; i < key; i++){
        phrases[i].textContent = data[`${i+1}`];
      }

    }

    // Inizializzazione all’apertura della pagina
    function init() {
      const key = getKeyFromHash() || '0'; // fallback a '0' se non c'è chiave
      renderByKey(key);
    }

    // Reagisci ai cambi di hash senza ricaricare
    window.addEventListener('hashchange', () => {
      const key = getKeyFromHash();
      renderByKey(key);
    });

    // Avvio
    init();
  </script>
</body>

</html>